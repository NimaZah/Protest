<!DOCTYPE html> 
<head> 
	<title> 
		Predict the length of the protest
	</title> 
	<link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head> 
<body onload="load_selections()">
<div class="home">
	<h1 style="color: green">
		Predict the length of the protest
	</h1>
	<p>
		Please specify the following details:
	</p>
	        Select the country:<select id="country" name="country">
	        	</select> 
	</p>	
	<p>
		Select the year:<select id="year" name="year" >
	        	</select> 
	</p>	
	<p>
		Select the region:<select id="region" name="region" >
	        	</select> 
	</p>
	<p>
		Select the number of participants:<select id="participants" name="participants" >
	        	</select> 
	</p>
	<button>
	<a onclick="link_with_args();" href="javascript:void(0);">Predict</a>
	</button>
	<p> 
		The predicted length of the protest is:
		<span class="output"></span>
	</p>
	
	<script type="text/javascript">
		function getOption() {
			// load selections from HTML controls into JS variables
			selectElementcountry= document.querySelector("#country");
			selectElementregion = document.querySelector("#region");
			// load values of continuous variables into JS variables
			year = document.getElementById("year").value;
			participants = document.getElementById("participants").value;
			
			// load values of categorical variables into JS variables
			var index_country = selectElementcountry.selectedIndex;
			country = selectElementcountry.options[index_country].value;
			var index_region = selectElementregion.selectedIndex;
			region = selectElementregion.options[index_region].value;
			
			// build complete URL, including scoring parameters, for the result display page
			//
			prefix = "/show-prediction/?"
			window.output = prefix.concat(
				"year=",year,
				"&participants=",participants,
				"&country=",country,
				"&region=",region);
			return output;
		}
		window.onload = function() {
			getOption();
		}
	</script>
</body>

function link_with_args(){
        // call getOption to create the URL (including scoring parameters) from HTML control selections
	getOption();	
	console.log("in link_with_args");
	console.log(window.output);
	// specify the target of the link = the URL generated by getOption
	window.location.href = window.output;
	}		
	</script>
	<script>
	function load_selections(){
	// initialize all selections
	var country = document.getElementById("country");
	var region = document.getElementById("region");
	var year = document.getElementById("year");
	var participants = document.getElementById("participants");
	// fill the selections with all available values
	var options = ["","Africa","Asia","Europe","North America","Oceania","South America"]
	for (var i=0; i<options.length; i++){
		var optn = document.createElement('option');
		optn.text = options[i];
		if (i>0){
			optn.value = options[i];
			country.add(optn);
		}else{
			optn.value = options[i];
			region.add(optn);
		}
	}
	var options = ["","2019","2018","2017","2016","2015","2014","2013","2012","2011","2010"]
	for (var i=0; i<options.length; i++){
		var optn = document.createElement('option');
		optn.text = options[i];
		if (i>0){
			optn.value = options[i];
			year.add(optn);
		}else{
			optn.value = options[i];
			participants.add(optn);
		}
	}
	}
	</script>